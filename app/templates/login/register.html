<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <!-- Font Awesome -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
      rel="stylesheet"
    />
    <script
      src="https://code.jquery.com/jquery-3.7.1.js"
      integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
      crossorigin="anonymous"
    ></script>
    <!-- Google Fonts -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap"
      rel="stylesheet"
    />
    <!-- MDB -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.3.2/mdb.min.css"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='logincss.css') }}"
    />
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <style>
        .error { color: red; }
    </style>

   
    <style>
      /* Custom CSS to position the image */
      
  </style>
  </head>
  <body>
    <img src="{{ url_for('static', filename='newsers/img/logo.png') }}" class="hide-on-mobile"  onclick="window.location.href='/'"" style="position:absolute"/>

          
    <section class="vh-100">
      <div class="container-fluid h-custom">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col-md-9 col-lg-6 col-xl-5">
            <img
              src="https://mdbcdn.b-cdn.net/img/Photos/new-templates/bootstrap-login-form/draw2.webp"
              class="img-fluid"
              alt="Sample image"
            />
          </div>
          <div class="col-md-8 col-lg-6 col-xl-4 offset-xl-1">
            <form method="POST" action="/register">
            
          
              <!-- Full Name input -->
              <div data-mdb-input-init class="form-outline mb-4">
                  <input type="text" id="fullName" name="fullName" class="form-control active form-control-lg" placeholder="Enter your full name" />
                  <label class="form-label" for="fullName">Full Name</label>
                  <p class="reg-uname-err text-danger"></p>
              </div>
          
              <!-- Username input -->
              <div data-mdb-input-init class="form-outline mb-4">
                  <input type="text" id="username" name="username" class="form-control active form-control-lg" placeholder="Enter your username" />
                  <label class="form-label" for="username">Username</label>
                  <p class="reg-username-err text-danger"></p>
              </div>
          
              <!-- Email input -->
              <div data-mdb-input-init class="form-outline mb-4">
                  <input type="email" id="email" name="email" class="form-control active form-control-lg" placeholder="Enter a valid email address" />
                  <label class="form-label" for="email">Email address</label>
                  <span id="emailError" class="error-message"></span>
                  <p class="reg-email-err text-danger"></p>
              </div>
          
              <!-- Phone Number input -->
              <div data-mdb-input-init class="form-outline mb-4">
                  <input type="tel" id="phone" name="phoneNumber" maxlength="10" class="form-control active form-control-lg" placeholder="Enter your phone number" />
                  <label class="form-label" for="phone">Phone Number</label>
                  <p class="reg-phone-err text-danger"></p>
              </div>
          
              <!-- Address input -->
              <div data-mdb-input-init class="form-outline mb-4">
                  <input type="text" id="address" name="address" class="form-control active form-control-lg" placeholder="Enter your address" />
                  <label class="form-label" for="address">Address</label>
              </div>
          
              <!-- Date of Birth input -->
              <div data-mdb-input-init class="form-outline mb-4">
                  <input type="date" id="dob" name="dob" class="form-control active form-control-lg" />
                  <label class="form-label" for="dob">Date of Birth</label>
              </div>
          
              <!-- Password input -->
              <div data-mdb-input-init class="form-outline mb-3">
                  <input type="password" id="password" name="password" class="form-control active form-control-lg" placeholder="Enter password" />
                  <label class="form-label" for="password">Password</label>
                  <p class="pwd_error text-danger"></p>
              </div>
          
              <!-- Confirm Password input -->
              <div data-mdb-input-init class="form-outline mb-3">
                  <input type="password" id="confirmpassword" name="confirmpassword" class="form-control active form-control-lg" placeholder="Enter password again" />
                  <label class="form-label" for="confirmpassword">Confirm Password</label>
                  <p class="cp_error text-danger"></p>
              </div>
          
              <div class="d-flex justify-content-between align-items-center">
                  <!-- Checkbox -->
                  <!--<div class="form-check mb-0">
                      <input class="form-check-input me-2" type="checkbox" value="" id="form2Example3" />
                      <label class="form-check-label" for="form2Example3">Remember me</label>
                  </div>-->
                  <a href="/request-password-reset" class="text-body">Forgot password?</a>
              </div>
          
              <div class="text-center text-lg-start mt-4 pt-2">
                  <button type="submit" id="submit" data-mdb-button-init data-mdb-ripple-init class="btn btn-primary btn-lg" style="padding-left: 2.5rem; padding-right: 2.5rem">REGISTER</button>
                  <p class="small fw-bold mt-2 pt-1 mb-0">
                      Already have an account? <a href="/" class="link-danger">Login</a>
                  </p>
              </div>
          </form>
          
 
  <script>

    $(document).ready(function() {
      document.getElementById('email').addEventListener('blur', function() {
        var email = this.value;
        fetch('/check-email?email=' + encodeURIComponent(email))
            .then(response => response.json())
            .then(data => {
                if (data.exists) {
                    document.getElementById('emailError').textContent = 'Email already exists';
                    document.getElementById('submitBtn').disabled = true;
                } else {
                    document.getElementById('emailError').textContent = '';
                    document.getElementById('submitBtn').disabled = false;
                }
            });
    });
        function validateFullName() {
            const fullName = $("#fullName").val();
            const regex = /^[a-zA-Z ]{2,30}$/;
            if (!regex.test(fullName)) {
                $(".reg-uname-err").text("Full name must be 2-30 characters long and contain only letters and spaces.");
                return false;
            } else {
                $(".reg-uname-err").text("");
                return true;
            }
        }
    
        function validateUsername() {
            const username = $("#username").val();
            const regex = /^[a-zA-Z0-9_]{3,15}$/;
            if (!regex.test(username)) {
                $(".reg-username-err").text("Username must be 3-15 characters long and contain only letters, numbers, and underscores.");
                return false;
            } else {
                $(".reg-username-err").text("");
                return true;
            }
        }
    
        function validateEmail() {
            const email = $("#email").val();
            const regex = /^[^\s@]+@gmail\.com$/;
            if (!regex.test(email)) {
                $(".reg-email-err").text("Enter a valid email address.");
                return false;
            } else {
                $(".reg-email-err").text("");
                return true;
            }
        }
    
        function validatePhoneNumber() {
            const phoneNumber = $("#phone").val();
            const regex = /^\d{10}$/;
            if (!regex.test(phoneNumber)) {
                $(".reg-phone-err").text("Phone number must be 10 digits long.");
                return false;
            } else {
                $(".reg-phone-err").text("");
                return true;
            }
        }
    
        function validatePassword() {
            const password = $("#password").val();
            const regex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
            if (!regex.test(password)) {
                $(".pwd_error").text("Password must be at least 8 characters long and contain at least one letter and one number.");
                return false;
            } else {
                $(".pwd_error").text("");
                return true;
            }
        }
    
        function validateConfirmPassword() {
            const password = $("#password").val();
            const confirmPassword = $("#confirmpassword").val();
            if (password !== confirmPassword) {
                $(".cp_error").text("Passwords do not match.");
                return false;
            } else {
                $(".cp_error").text("");
                return true;
            }
        }
    
        // Example of a password that satisfies the condition:
        // const validPassword = "Password123";
        function validateForm() {
            return validateFullName() && validateUsername() && validateEmail() && validatePhoneNumber() && validatePassword() && validateConfirmPassword();
        }
    
        $("input").on("keyup blur", function() {
            validateForm();
            $("#submit").prop("disabled", !validateForm());
        });
    
        $("form").on("submit", function(event) {
            if (!validateForm()) {
                event.preventDefault();
            }
        });
    
        // Initial disable submit button
        $("#submit").prop("disabled", true);
    });
    </script>
    
          </div>
        </div>
      </div>
      <div
        class="d-flex flex-column flex-md-row text-center text-md-start justify-content-between py-4 px-4 px-xl-5 bg-primary"
      >
        <!-- Copyright -->
        <div class="text-white mb-3 mb-md-0">
          Copyright © 2020. All rights reserved.
        </div>
        <!-- Copyright -->

        <!-- Right -->
        <div>
          <a href="#!" class="text-white me-4">
            <i class="fab fa-facebook-f"></i>
          </a>
          <a href="#!" class="text-white me-4">
            <i class="fab fa-twitter"></i>
          </a>
          <a href="#!" class="text-white me-4">
            <i class="fab fa-google"></i>
          </a>
          <a href="#!" class="text-white">
            <i class="fab fa-linkedin-in"></i>
          </a>
        </div>
        <!-- Right -->
      </div>
    </section>
  </body>
</html>